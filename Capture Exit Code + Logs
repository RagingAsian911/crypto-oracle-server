- name: Publish with exit code capture
  run: |
    set -e
    echo "ğŸ“¦ Attempting publish..."
    npm publish --access public || {
      echo "âŒ Publish failed with exit code $?"
      echo "ğŸ“„ Dumping logs:"
      cat ~/.npm/_logs/* || echo "No logs found"
      exit 1
    }
  env:
    NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
