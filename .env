PORT=3001
ORACLE_KEY=your-64-char-hex-key
PAYPAL_EMAIL=charlesbuchanan89@yahoo.com
NODE_ENV=production
PORT=3001
PAYOUT_EMAIL=charlesbuchanan89@yahoo.com
RENDER_API_KEY=your_render_key_here
sudo bash deploy.sh nano /var/www/oraclesignal/crypto-oracle-server/.env pm2 restart oracle-server # set your author info to GitHub no-reply
git config --global user.email "RagingAsian911@users.noreply.github.com"
git config --global user.name "RagingAsian911"

# for the commit you want to push (amend last commit author)
git add -A
git commit --amend --reset-author --no-edit

# force-push the amended commit
git push -f origin main # show pm2 services
pm2 list

# show logs for oracle
pm2 logs oracle-server --lines 200

# check node port (example)
curl -I http://localhost:3000/ name: Build & Deploy Oracle-Server

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4
      
      - name: Use Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install Dependencies
        run: npm ci

      - name: Build (if applicable)
        run: npm run build --if-present

      - name: Run Tests (optional)
        # You can remove this if you have no test script
        run: npm test || echo "No tests configured"

  deploy:
    needs: build
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Deploy via SSH + PM2
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.SERVER_HOST }}
          username: ${{ secrets.SERVER_USER }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          port: ${{ secrets.SERVER_PORT }}
          script: |
            cd /var/www/oraclesignal/crypto-oracle-server
            git pull origin main
            npm ci --production
            pm2 reload oracle-server || pm2 start MAIN.JS --name oracle-server
            pm2 save